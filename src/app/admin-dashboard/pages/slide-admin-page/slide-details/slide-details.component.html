<form [formGroup]="slideForm" (ngSubmit)="onSubmit()">

  <!-- Barra de acciones -->
  <div class="sticky top-0 z-40 bg-base-100/90 backdrop-blur border-b border-base-300 px-4 lg:px-8 py-3">
    <div class="flex items-center gap-3">
      <button class="btn btn-primary btn-lg" type="submit">
        @if (isLoading()) {
          <span class="loading loading-spinner loading-sm"></span>
          Guardando...
        } @else {
          Guardar
        }
      </button>
    </div>
  </div>


  <div class="grid grid-cols-1 md:grid-cols-2 gap-15 px-4 lg:px-8 pt-10">

    <!-- Imagen Desktop -->
    <div>
      <div class="relative group">
        <img
          [src]="previewDesktop || (slideForm.value.image_desktop | pathImage:'slides')"
          alt="Imagen Desktop"
          class="w-full object-cover rounded-xl"
        />
        @if (slideForm.value.image_desktop) {
        <button
          type="button"
          (click)="removeDesktopImage()"
          class="absolute top-1 right-1 btn btn-xs btn-error opacity-0 group-hover:opacity-100 transition-opacity">
          ✕
        </button>
        }
      </div>

      <fieldset class="fieldset">
        <legend class="fieldset-legend">Imagen Desktop</legend>
        <input
          type="file"
          accept="image/*"
          class="file-input file-input-primary w-full"
          (change)="onDesktopFileChange($event)"
        />
        <form-error-label [control]="slideForm.get('image_desktop')!" fieldName="image_desktop" />
      </fieldset>

    </div>

    <!-- Imagen Mobile -->
    <div>
      <div class="relative group">
        <img
          [src]="previewMobile || (slideForm.value.image_mobile | pathImage:'slides')"
          alt="Imagen Mobile"
          class="w-full object-cover rounded-xl"
        />
        @if (slideForm.value.image_mobile) {
        <button
          type="button"
          (click)="removeMobileImage()"
          class="absolute top-1 right-1 btn btn-xs btn-error opacity-0 group-hover:opacity-100 transition-opacity">
          ✕
        </button>
        }
      </div>

      <fieldset class="fieldset">
        <legend class="fieldset-legend">Imagen Mobile</legend>
        <input
          type="file"
          accept="image/*"
          class="file-input file-input-primary w-full"
          (change)="onMobileFileChange($event)"
        />
        <form-error-label [control]="slideForm.get('image_mobile')!" fieldName="image_mobile" />
      </fieldset>

    </div>

  </div>

</form>

@if (wasSaved()) {
  <div class="toast toast-top toast-center z-42">
    <div class="alert alert-success">
      <span>{{ successMessage() }}</span>
    </div>
  </div>
}
